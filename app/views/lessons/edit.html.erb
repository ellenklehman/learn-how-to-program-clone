<h1><%= @lesson.name %></h1>

<h4>Chapter: <%=@lesson.section.chapter.name %></h4>
<h4>Section: <%=@lesson.section.name %></h4>
<h4>Lesson Number: <%=@lesson.number %></h4>

<p>Text: <%= @lesson.text %></p>

<h3>Edit lesson</h3>

<form id="edit_lesson" action="/lessons/<%= @lesson.id %>" method="post">
  <input name="_method" type="hidden" value="patch">
  <label for="lesson_name">Name of Lesson</label>
  <input id="lesson_name" name="lesson[name]" type="text" value="<%= @lesson.name %>">
  <label for="lesson_text">Text of Lesson</label>
  <input id="lesson_text" name="lesson[text]" type="text" value="<%= @lesson.text %>">
  <label for="lesson_number">Lesson Number</label>
  <input id="lesson_number" name="lesson[number]" type = "integer" value="<%= @lesson.number %>">
  <select form="edit_lesson" name="lesson[section_id]">
    <% @sections.each_with_index do |section, index| %>
      <option value="<%= section.id %>" <%= @selected[index] %>><%= section.chapter.name %>:<%= section.name %></option>
    <% end %>
  </select>
  <button>Update Lesson</button>
</form>

<% if @lesson.errors.any? %>
  <p>Please fix errors:</p>
  <ul>
    <% @lesson.errors.full_messages.each do |message| %>
    <li><%= message %></li>
    <% end %>
  </ul>
<% end %>

<p><a href = "/admin/<%= @lesson.id %>"
      data-confirm="Are you sure you want to delete this lesson?"
      data-method="delete" rel= "nofollow">Destroy your Lesson</a></p>

<p><a href="/admin">Return to admin page</a></p>
